"use strict";(self.webpackChunklogin=self.webpackChunklogin||[]).push([[198],{198:(A,d,u)=>{u.r(d),u.d(d,{UserModule:()=>T});var m=u(895),_=u(773),e=u(256),c=u(529);let p=(()=>{class n{constructor(t){this.http=t,this.ApiUrl="http://localhost:3000/users"}login(t,r){const i={email:t,password:r};this.http.post(`${this.ApiUrl}/login`,i,{headers:this.getAuthHeaders()}).subscribe(a=>{localStorage.setItem("token",a.token),console.log("response: ",a),this.userEmail=i.email},a=>{a instanceof c.UA&&(a.error instanceof ErrorEvent?console.log("Error: ",a.error.message):console.error(`codigo de error ${a.status}mensaje: ${a.error}`))})}create(t,r,o){this.http.post(`${this.ApiUrl}/create`,{username:t,email:r,password:o}).subscribe(g=>{console.log("Registro exitoso. ",g)},g=>{console.log("Error: ",g)})}getUser(){return this.http.get(`${this.ApiUrl}/${this.userEmail}`)}updateUser(t){const r=`${this.ApiUrl}/update/${t._id}`,o=t;console.log("Usuario actualizado con \xe9xito",o,r),this.http.put(r,o).subscribe(i=>{console.log("Usuario actualizado con \xe9xito. ",i)},i=>{console.log("Error: ",i)})}getAuthHeaders(){const t=localStorage.getItem("token");return new c.WM({Authorization:`Bearer ${t}`})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(c.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var s=u(433);function C(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"ul")(2,"li"),e._uU(3),e.qZA(),e.TgZ(4,"li"),e._uU(5),e.qZA()(),e._UZ(6,"br"),e.TgZ(7,"button",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editProfile())}),e._uU(8,"Editar perfil"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Oqu(t.userProfile.username),e.xp6(2),e.Oqu(t.userProfile.email)}}function U(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"form")(1,"div")(2,"label",3),e._uU(3,"Usuario"),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"input",4),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.userProfile.username=o)}),e.qZA()(),e.TgZ(6,"div")(7,"label",3),e._uU(8,"Correo"),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"input",5),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.userProfile.email=o)}),e.qZA()(),e.TgZ(11,"div")(12,"label",3),e._uU(13,"Contrase\xf1a"),e.qZA(),e._UZ(14,"br"),e.TgZ(15,"input",6),e.NdJ("ngModelChange",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.userProfile.password=o)}),e.qZA()(),e.TgZ(16,"div")(17,"label",3),e._uU(18,"Nueva imagen"),e.qZA(),e._UZ(19,"br"),e.TgZ(20,"input",7),e.NdJ("change",function(o){e.CHM(t);const i=e.oxw();return e.KtG(i.onFileSelected(o))}),e.qZA()(),e._UZ(21,"br"),e.TgZ(22,"button",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateProfile())}),e._uU(23," Guardar cambios "),e.qZA(),e.TgZ(24,"button",2),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cancelUpdate())}),e._uU(25," Cancelar "),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngModel",t.userProfile.username),e.xp6(5),e.Q6J("ngModel",t.userProfile.email),e.xp6(5),e.Q6J("ngModel",t.userProfile.password)}}const Z=[{path:"login",component:(()=>{class n{constructor(t){this.UserService=t,this.email="",this.password=""}login(){this.UserService.login(this.email,this.password),console.log("email: ",this.email),console.log("password: ",this.password)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],decls:14,vars:3,consts:[[3,"ngSubmit"],["loginForm","ngForm"],["for",""],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit",3,"disabled"]],template:function(t,r){if(1&t&&(e.TgZ(0,"h1"),e._uU(1,"Iniciar sesi\xf3n"),e.qZA(),e.TgZ(2,"form",0,1),e.NdJ("ngSubmit",function(){return r.login()}),e.TgZ(4,"div")(5,"label",2),e._uU(6,"correo"),e.qZA(),e.TgZ(7,"input",3),e.NdJ("ngModelChange",function(i){return r.email=i}),e.qZA()(),e.TgZ(8,"div")(9,"label",2),e._uU(10,"Contrase\xf1a"),e.qZA(),e.TgZ(11,"input",4),e.NdJ("ngModelChange",function(i){return r.password=i}),e.qZA()(),e.TgZ(12,"button",5),e._uU(13," Iniciar sesion "),e.qZA()()),2&t){const o=e.MAs(3);e.xp6(7),e.Q6J("ngModel",r.email),e.xp6(4),e.Q6J("ngModel",r.password),e.xp6(1),e.Q6J("disabled",!o.form.valid)}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F]}),n})()},{path:"create",component:(()=>{class n{constructor(t){this.userService=t}createUser(){this.userService.create(this.username,this.email,this.password),console.log("user created")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create"]],decls:18,vars:4,consts:[[3,"ngSubmit"],["createForm","ngForm"],["for",""],["type","text","name","username","required","",3,"ngModel","ngModelChange"],["type","email","name","email","required","",3,"ngModel","ngModelChange"],["type","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit",3,"disabled"]],template:function(t,r){if(1&t&&(e.TgZ(0,"h1"),e._uU(1,"Registrar usuario"),e.qZA(),e.TgZ(2,"form",0,1),e.NdJ("ngSubmit",function(){return r.createUser()}),e.TgZ(4,"div")(5,"label",2),e._uU(6,"usuario"),e.qZA(),e.TgZ(7,"input",3),e.NdJ("ngModelChange",function(i){return r.username=i}),e.qZA()(),e.TgZ(8,"div")(9,"label",2),e._uU(10,"correo"),e.qZA(),e.TgZ(11,"input",4),e.NdJ("ngModelChange",function(i){return r.email=i}),e.qZA()(),e.TgZ(12,"div")(13,"label",2),e._uU(14,"Contrase\xf1a"),e.qZA(),e.TgZ(15,"input",5),e.NdJ("ngModelChange",function(i){return r.password=i}),e.qZA()(),e.TgZ(16,"button",6),e._uU(17," Registrarse "),e.qZA()()),2&t){const o=e.MAs(3);e.xp6(7),e.Q6J("ngModel",r.username),e.xp6(4),e.Q6J("ngModel",r.email),e.xp6(4),e.Q6J("ngModel",r.password),e.xp6(1),e.Q6J("disabled",!o.form.valid)}},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.On,s.F]}),n})()},{path:"profile",component:(()=>{class n{editProfile(){this.editValue=!0}constructor(t){this.UserService=t,this.editValue=!1}ngOnInit(){this.getUser()}getUser(){this.UserService.getUser().subscribe(t=>{console.log("response: ",t),this.userProfile=t},t=>{console.log("Error: ",t)})}cancelUpdate(){this.editValue=!1}onFileSelected(t){this.selectFile=t.target.files[0]}updateProfile(){this.UserService.updateUser(this.userProfile)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-profile"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["editInfo",""],[3,"click"],["for",""],["type","text","name","name",3,"ngModel","ngModelChange"],["type","email","name","email",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","Cambiar contrase\xf1a",3,"ngModel","ngModelChange"],["type","file","name","picture",3,"change"]],template:function(t,r){if(1&t&&(e.YNc(0,C,9,2,"div",0),e.YNc(1,U,26,3,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",!r.editValue)("ngIfElse",o)}},dependencies:[m.O5,s._Y,s.Fj,s.JJ,s.JL,s.On,s.F]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[_.Bz.forChild(Z),_.Bz]}),n})(),T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,M,s.u5]}),n})()}}]);